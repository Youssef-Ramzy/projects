<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="حاسبة تكاليف الطباعة - احسب تكلفة طباعة الكتب والملحقات بسهولة">
  <title>حاسبة المطبعة | Designed by Ramzy</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Kufi+Arabic:wght@400;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg-cream: #f4f1ea;
      --bg-paper: #f9f7f1;
      --bg-input: #e8e4d9;
      --border-light: #d4c5a9;
      --text-primary: #5d4037;
      --accent-red: #8b0000;
      --white-paper: #fffef8;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Noto Kufi Arabic', sans-serif;
      background-color: var(--bg-cream);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23d4c5a9' fill-opacity='0.15'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .container {
      width: 100%;
      max-width: 420px;
      background: var(--bg-paper);
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(93, 64, 55, 0.15);
      border: 1px solid var(--border-light);
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .header h1 {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent-red);
      text-shadow: 1px 1px 2px var(--border-light);
      margin-bottom: 0.5rem;
    }

    .header-line {
      height: 4px;
      width: 60px;
      background: linear-gradient(90deg, transparent, var(--accent-red), transparent);
      margin: 0.5rem auto;
      border-radius: 2px;
    }

    .header p {
      font-size: 0.875rem;
      font-weight: 600;
      opacity: 0.8;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    .form-group label {
      display: block;
      font-size: 0.875rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .input-field {
      width: 100%;
      padding: 0.875rem 1rem;
      font-size: 1rem;
      font-weight: 600;
      font-family: inherit;
      background: var(--bg-input);
      border: 2px solid var(--border-light);
      border-radius: 8px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.2s ease;
    }

    .input-field:focus {
      background: var(--white-paper);
      border-color: var(--accent-red);
      box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.1);
    }

    .input-field::placeholder {
      color: var(--text-primary);
      opacity: 0.5;
    }

    /* Remove number spinners */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type=number] {
      -moz-appearance: textfield;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .mode-selector {
      display: flex;
      justify-content: space-around;
      padding: 1rem;
      background: var(--bg-input);
      border-radius: 8px;
      border: 2px dashed var(--border-light);
      margin: 1.5rem 0;
    }

    .mode-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .mode-option input[type="radio"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent-red);
      cursor: pointer;
    }

    .custom-prices {
      display: none;
      gap: 1rem;
      padding: 1rem;
      background: var(--bg-input);
      border-radius: 8px;
      border: 1px solid var(--border-light);
      margin-bottom: 1rem;
    }

    .custom-prices.active {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    .custom-prices label {
      font-size: 0.75rem;
      margin-bottom: 0.25rem;
      display: block;
    }

    .custom-prices .input-field {
      padding: 0.625rem;
      text-align: center;
    }

    .binding-toggle {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.25rem;
      background: var(--white-paper);
      border: 2px solid var(--accent-red);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 1.5rem;
    }

    .binding-toggle:hover {
      background: #fcf8e3;
      transform: translateY(-1px);
    }

    .binding-toggle input[type="checkbox"] {
      width: 22px;
      height: 22px;
      accent-color: var(--accent-red);
      cursor: pointer;
    }

    .binding-toggle span {
      font-size: 1rem;
      font-weight: 700;
      color: var(--accent-red);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .binding-toggle svg {
      width: 22px;
      height: 22px;
      opacity: 0.8;
    }

    .results {
      background: var(--white-paper);
      border: 3px double var(--border-light);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 6px 6px 0 var(--border-light);
    }

    .results h3 {
      text-align: center;
      color: var(--accent-red);
      font-weight: 700;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid var(--border-light);
      margin-bottom: 1rem;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px dashed var(--border-light);
    }

    .result-row:last-child {
      border-bottom: none;
      padding-top: 1rem;
    }

    .result-row span:first-child {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .result-row span:first-child svg {
      width: 18px;
      height: 18px;
      opacity: 0.7;
    }

    .result-value {
      font-size: 1.375rem;
      font-weight: 800;
      color: var(--accent-red);
    }

    .result-row:last-child .result-value {
      color: var(--accent-red);
    }

    .footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.875rem;
      opacity: 0.6;
      font-style: italic;
    }

    .footer span {
      color: var(--accent-red);
    }

    /* Back to home link */
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-primary);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 1rem;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .back-link:hover {
      opacity: 1;
    }

    .back-link svg {
      width: 16px;
      height: 16px;
    }
  </style>
</head>

<body>
  <main class="container">
    <a href="../index.html" class="back-link">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      الرجوع للرئيسية
    </a>

    <header class="header">
      <h1>احسبلى شكراً</h1>
      <div class="header-line"></div>
      <p>نظام حساب تكاليف الطباعة</p>
    </header>

    <form id="calcForm" onsubmit="return false;">
      <div class="form-group">
        <label for="main">الكتاب الرئيسي</label>
        <input type="number" id="main" class="input-field" placeholder="عدد الصفحات" min="0" inputmode="numeric">
      </div>

      <div class="grid-2">
        <div class="form-group">
          <label for="add1">الملحق</label>
          <input type="number" id="add1" class="input-field" placeholder="0" min="0" inputmode="numeric">
        </div>
        <div class="form-group">
          <label for="add2">الإجابات</label>
          <input type="number" id="add2" class="input-field" placeholder="0" min="0" inputmode="numeric">
        </div>
      </div>

      <div class="mode-selector" role="radiogroup" aria-label="نوع السعر">
        <label class="mode-option">
          <input type="radio" name="mode" value="retail" checked>
          قطاعي
        </label>
        <label class="mode-option">
          <input type="radio" name="mode" value="wholesale">
          جملة
        </label>
        <label class="mode-option">
          <input type="radio" name="mode" value="custom">
          مخصص
        </label>
      </div>

      <div id="customPrices" class="custom-prices">
        <div>
          <label for="cLow">سعر &lt; 80 ورقة</label>
          <input type="number" id="cLow" class="input-field" value="1.0" step="0.01" min="0" inputmode="decimal">
        </div>
        <div>
          <label for="cHigh">سعر &gt; 80 ورقة</label>
          <input type="number" id="cHigh" class="input-field" value="0.85" step="0.01" min="0" inputmode="decimal">
        </div>
      </div>

      <label class="binding-toggle">
        <input type="checkbox" id="binding">
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          إضافة تكعيب (10/15 ج)
        </span>
      </label>
    </form>

    <section class="results" aria-live="polite">
      <h3>إجمالي التكلفة</h3>
      <div class="result-row">
        <span>2 في الورقة:</span>
        <span id="res2" class="result-value">0.00 ج.م</span>
      </div>
      <div class="result-row">
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
          </svg>
          مختلط (رئيسي 2 + ملحق 4):
        </span>
        <span id="resM" class="result-value">0.00 ج.م</span>
      </div>
      <div class="result-row">
        <span>4 في الورقة:</span>
        <span id="res4" class="result-value">0.00 ج.م</span>
      </div>
    </section>

    <footer class="footer">
      <span>&mdash;</span> Designed by Ramzy <span>&mdash;</span>
    </footer>
  </main>

  <script>
    // Cache DOM elements for better performance
    const elements = {
      main: document.getElementById('main'),
      add1: document.getElementById('add1'),
      add2: document.getElementById('add2'),
      binding: document.getElementById('binding'),
      customPrices: document.getElementById('customPrices'),
      cLow: document.getElementById('cLow'),
      cHigh: document.getElementById('cHigh'),
      res4: document.getElementById('res4'),
      res2: document.getElementById('res2'),
      resM: document.getElementById('resM')
    };

    // Price configurations
    const PRICES = {
      retail: { low: 1.0, high: 0.85 },
      wholesale: { low: 0.90, high: 0.75 }
    };

    const BINDING_COST = { low: 10, high: 15 };
    const THRESHOLD = 80;

    // Calculate sheets needed
    const getSheets = (pages, layout) => pages > 0 ? Math.ceil(pages / layout) : 0;

    // Calculate price for sheets
    const calculatePrice = (sheets, priceLow, priceHigh, includeBinding) => {
      if (sheets === 0) return 0;
      let price = sheets * (sheets < THRESHOLD ? priceLow : priceHigh);
      if (includeBinding) {
        price += sheets < THRESHOLD ? BINDING_COST.low : BINDING_COST.high;
      }
      return price;
    };

    // Format price for display
    const formatPrice = (price) => `${price.toFixed(2)} ج.م`;

    // Main calculation function
    function calculate() {
      const pages = {
        main: +elements.main.value || 0,
        add1: +elements.add1.value || 0,
        add2: +elements.add2.value || 0
      };

      const mode = document.querySelector('input[name="mode"]:checked').value;
      const includeBinding = elements.binding.checked;

      // Toggle custom prices visibility
      elements.customPrices.classList.toggle('active', mode === 'custom');

      // Get prices based on mode
      let priceLow, priceHigh;
      if (mode === 'custom') {
        priceLow = +elements.cLow.value || 0;
        priceHigh = +elements.cHigh.value || 0;
      } else {
        priceLow = PRICES[mode].low;
        priceHigh = PRICES[mode].high;
      }

      // Calculate sheets for each layout
      const sheets4 = getSheets(pages.main, 4) + getSheets(pages.add1, 4) + getSheets(pages.add2, 4);
      const sheets2 = getSheets(pages.main, 2) + getSheets(pages.add1, 2) + getSheets(pages.add2, 2);
      const sheetsMixed = getSheets(pages.main, 2) + getSheets(pages.add1, 4) + getSheets(pages.add2, 4);

      // Update results
      elements.res4.textContent = formatPrice(calculatePrice(sheets4, priceLow, priceHigh, includeBinding));
      elements.res2.textContent = formatPrice(calculatePrice(sheets2, priceLow, priceHigh, includeBinding));
      elements.resM.textContent = formatPrice(calculatePrice(sheetsMixed, priceLow, priceHigh, includeBinding));
    }

    // Add event listeners using event delegation
    document.getElementById('calcForm').addEventListener('input', calculate);
    document.getElementById('calcForm').addEventListener('change', calculate);

    // Initial calculation
    calculate();
  </script>
</body>

</html>